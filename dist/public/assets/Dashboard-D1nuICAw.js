import{F as ls,G as os,j as e,H as Z,J as is,K as J,L as X,M as ns,N as ee,Q as cs,U as se,W as ae,X as ds,Y as ms,Z as te,c as us,$ as re,y as xs,O as hs,u as le,a0 as ps,s as fs,e as gs,v as js,w as ys,t as oe,x as Ns,z as vs,o as ws}from"./ui-C--pN7N1.js";import{c as m,i as ie,u as ne,D as ce,j as de,k as me,l as ue,m as xe,n as he,L as F,I as z,A as bs,o as Cs,p as pe,B as g,q as As,a as Ds,C as $,e as _,f as Q,h as B,g as ks}from"./index-BHAYH_9x.js";import{b as Es,c as S,u as Y}from"./query-8bG1UgkI.js";import{L as T}from"./router-CF8zxTMD.js";import{B as G}from"./badge-Dfpj_YoU.js";import{r as o}from"./vendor-CbTYwD9p.js";import{k as fe,l as Ss,c as zs,m as ge,n as I,o as Fs,p as Ts,q as Rs,L as Ps,P as V,r as qs,s as Os,t as Ls,Z as $s,u as _s,j as Qs,v as Bs,w as Is,x as Ms,y as Us,z as Ws,D as Ks,E as Hs,G as Ys,B as Gs,A as Vs}from"./icons-BG5vJQy4.js";import{a as C}from"./api-BrMLtf3-.js";const Zs=ls,Js=os,je=o.forwardRef(({className:s,children:t,...r},l)=>e.jsxs(Z,{ref:l,className:m("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(is,{asChild:!0,children:e.jsx(fe,{className:"h-4 w-4 opacity-50"})})]}));je.displayName=Z.displayName;const ye=o.forwardRef(({className:s,...t},r)=>e.jsx(J,{ref:r,className:m("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Ss,{className:"h-4 w-4"})}));ye.displayName=J.displayName;const Ne=o.forwardRef(({className:s,...t},r)=>e.jsx(X,{ref:r,className:m("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(fe,{className:"h-4 w-4"})}));Ne.displayName=X.displayName;const ve=o.forwardRef(({className:s,children:t,position:r="popper",...l},n)=>e.jsx(ns,{children:e.jsxs(ee,{ref:n,className:m("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...l,children:[e.jsx(ye,{}),e.jsx(cs,{className:m("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Ne,{})]})}));ve.displayName=ee.displayName;const Xs=o.forwardRef(({className:s,...t},r)=>e.jsx(se,{ref:r,className:m("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));Xs.displayName=se.displayName;const R=o.forwardRef(({className:s,children:t,...r},l)=>e.jsxs(ae,{ref:l,className:m("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ds,{children:e.jsx(zs,{className:"h-4 w-4"})})}),e.jsx(ms,{children:t})]}));R.displayName=ae.displayName;const ea=o.forwardRef(({className:s,...t},r)=>e.jsx(te,{ref:r,className:m("-mx-1 my-1 h-px bg-muted",s),...t}));ea.displayName=te.displayName;var we="AlertDialog",[sa,Aa]=us(we,[re]),w=re(),be=s=>{const{__scopeAlertDialog:t,...r}=s,l=w(t);return e.jsx(Ns,{...l,...r,modal:!0})};be.displayName=we;var aa="AlertDialogTrigger",Ce=o.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,n=w(r);return e.jsx(xs,{...n,...l,ref:t})});Ce.displayName=aa;var ta="AlertDialogPortal",Ae=s=>{const{__scopeAlertDialog:t,...r}=s,l=w(t);return e.jsx(vs,{...l,...r})};Ae.displayName=ta;var ra="AlertDialogOverlay",De=o.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,n=w(r);return e.jsx(hs,{...n,...l,ref:t})});De.displayName=ra;var k="AlertDialogContent",[la,oa]=sa(k),ia=ws("AlertDialogContent"),ke=o.forwardRef((s,t)=>{const{__scopeAlertDialog:r,children:l,...n}=s,u=w(r),j=o.useRef(null),x=le(t,j),A=o.useRef(null);return e.jsx(ps,{contentName:k,titleName:Ee,docsSlug:"alert-dialog",children:e.jsx(la,{scope:r,cancelRef:A,children:e.jsxs(fs,{role:"alertdialog",...u,...n,ref:x,onOpenAutoFocus:gs(n.onOpenAutoFocus,h=>{var y;h.preventDefault(),(y=A.current)==null||y.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[e.jsx(ia,{children:l}),e.jsx(ca,{contentRef:j})]})})})});ke.displayName=k;var Ee="AlertDialogTitle",Se=o.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,n=w(r);return e.jsx(js,{...n,...l,ref:t})});Se.displayName=Ee;var ze="AlertDialogDescription",Fe=o.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,n=w(r);return e.jsx(ys,{...n,...l,ref:t})});Fe.displayName=ze;var na="AlertDialogAction",Te=o.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,n=w(r);return e.jsx(oe,{...n,...l,ref:t})});Te.displayName=na;var Re="AlertDialogCancel",Pe=o.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,{cancelRef:n}=oa(Re,r),u=w(r),j=le(t,n);return e.jsx(oe,{...u,...l,ref:j})});Pe.displayName=Re;var ca=({contentRef:s})=>{const t=`\`${k}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${k}\` by passing a \`${ze}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${k}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{var l;document.getElementById((l=s.current)==null?void 0:l.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},da=be,ma=Ce,ua=Ae,qe=De,Oe=ke,Le=Te,$e=Pe,_e=Se,Qe=Fe;const xa=da,ha=ma,pa=ua,Be=o.forwardRef(({className:s,...t},r)=>e.jsx(qe,{className:m("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));Be.displayName=qe.displayName;const Ie=o.forwardRef(({className:s,...t},r)=>e.jsxs(pa,{children:[e.jsx(Be,{}),e.jsx(Oe,{ref:r,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));Ie.displayName=Oe.displayName;const Me=({className:s,...t})=>e.jsx("div",{className:m("flex flex-col space-y-2 text-center sm:text-left",s),...t});Me.displayName="AlertDialogHeader";const Ue=({className:s,...t})=>e.jsx("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Ue.displayName="AlertDialogFooter";const We=o.forwardRef(({className:s,...t},r)=>e.jsx(_e,{ref:r,className:m("text-lg font-semibold",s),...t}));We.displayName=_e.displayName;const Ke=o.forwardRef(({className:s,...t},r)=>e.jsx(Qe,{ref:r,className:m("text-sm text-muted-foreground",s),...t}));Ke.displayName=Qe.displayName;const He=o.forwardRef(({className:s,...t},r)=>e.jsx(Le,{ref:r,className:m(ie(),s),...t}));He.displayName=Le.displayName;const Ye=o.forwardRef(({className:s,...t},r)=>e.jsx($e,{ref:r,className:m(ie({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));Ye.displayName=$e.displayName;const Ge=o.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:m("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...t}));Ge.displayName="Textarea";function fa({children:s}){const[t,r]=o.useState(!1),[l,n]=o.useState(""),[u,j]=o.useState(""),[x,A]=o.useState(!1),[h,y]=o.useState(!1),{toast:p}=ne(),b=async N=>{if(N.preventDefault(),!l.trim()||!u.trim()){p({title:"Missing Information",description:"Please fill in both email and report fields.",variant:"destructive"});return}A(!0);try{const f=new FormData;f.append("email",l.trim()),f.append("message",`ClariTA Feedback Report

User Email: ${l.trim()}

Report:
${u.trim()}

---
This feedback was submitted through ClariTA's feedback form.
Timestamp: ${new Date().toISOString()}`),f.append("_subject","ClariTA Feedback Report"),f.append("_replyto",l.trim());const q=await fetch("https://formspree.io/f/mpwykolk",{method:"POST",body:f,headers:{Accept:"application/json"}});if(q.ok)y(!0),setTimeout(()=>{r(!1),y(!1),n(""),j("")},2e3),p({title:"Feedback Sent!",description:"Thank you for your feedback. We'll review it and get back to you if needed."});else{const E=await q.json();throw new Error(E.error||"Failed to send feedback")}}catch(f){console.error("Error sending feedback:",f),p({title:"Error",description:f instanceof Error?f.message:"There was an error sending your feedback. Please try again.",variant:"destructive"})}finally{A(!1)}},P=()=>{r(!1),y(!1),n(""),j("")};return e.jsxs(ce,{open:t,onOpenChange:r,children:[e.jsx(de,{asChild:!0,children:s}),e.jsxs(me,{className:"sm:max-w-[500px]",children:[e.jsxs(ue,{children:[e.jsxs(xe,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"#61C2A2"},children:e.jsx(ge,{className:"h-4 w-4 text-white"})}),"Found an Issue?"]}),e.jsx(he,{className:"text-left",children:e.jsx("div",{className:"space-y-3",children:e.jsx("p",{className:"text-sm leading-relaxed",style:{color:"#6B7280"},children:"Hi! Thank you for using ClariTA and helping us improve it. Your opinion is important for us to make ClariTA the best it can be. Please feel free to report any bugs or suggest features you would like to see coming next."})})})]}),h?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"#B6E2D3"},children:e.jsx(I,{className:"h-8 w-8",style:{color:"#61C2A2"}})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"#09224E"},children:"Feedback Sent Successfully!"}),e.jsx("p",{className:"text-sm",style:{color:"#6B7280"},children:"Your feedback has been sent to our team. Thank you for helping improve ClariTA!"})]}):e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(F,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Email Address"]}),e.jsx(z,{id:"email",type:"email",placeholder:"your.email@example.com",value:l,onChange:N=>n(N.target.value),className:"h-11",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(F,{htmlFor:"report",className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"h-4 w-4"}),"Report or Suggestion"]}),e.jsx(Ge,{id:"report",placeholder:"Describe the issue you encountered or the feature you'd like to see...",value:u,onChange:N=>j(N.target.value),className:"min-h-[120px] resize-none",required:!0})]}),e.jsxs(bs,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsxs(Cs,{className:"text-sm",children:[e.jsx("strong",{children:"Note:"})," Your feedback will be sent directly to our team. We'll review it and get back to you if needed."]})]}),e.jsxs(pe,{className:"gap-2",children:[e.jsx(g,{type:"button",variant:"outline",onClick:P,disabled:x,children:"Cancel"}),e.jsx(g,{type:"submit",disabled:x,className:"text-white font-medium",style:{backgroundColor:"#61C2A2"},children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Sending Feedback..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Send Feedback"]})})]})]})]})]})}function Da(){var W,K;const{user:s,loading:t,signOut:r}=As(),{toast:l}=ne(),n=Es(),[u,j]=o.useState(""),[x,A]=o.useState("all"),[h,y]=o.useState(null),[p,b]=o.useState({name:"",folder:"",tags:""}),[P,N]=o.useState(!1),{data:f,isLoading:q}=S({queryKey:["/api/user/uploads"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>(await C("/api/user/uploads")).json()}),{data:E,isLoading:Ve}=S({queryKey:["/api/user/quizzes"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>{const i=await(await C("/api/user/quizzes")).json();return await Promise.all(i.map(async d=>{try{console.log("Checking attempts for quiz:",d.id);const D=await C(`/api/quizzes/${d.id}/latest-attempt`);return console.log("Attempt response for quiz",d.id,":",D.ok),{...d,hasAttempts:D.ok}}catch(D){return console.log("Error checking attempts for quiz",d.id,":",D),{...d,hasAttempts:!1}}}))}}),{data:O}=S({queryKey:["/api/user/quiz-folders"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>(await C("/api/user/quiz-folders")).json()}),{data:v,isLoading:Ze,error:M}=S({queryKey:["/api/user/statistics"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>{console.log("Fetching user statistics...");const a=await C("/api/user/statistics");if(console.log("Statistics response status:",a.status),!a.ok){const c=await a.text();throw console.error("Statistics API error:",c),new Error(`Failed to fetch statistics: ${a.status} - ${c}`)}const i=await a.json();return console.log("Statistics data received:",i),i}});S({queryKey:["/api/debug/user-data"],retry:!1,refetchOnWindowFocus:!1,queryFn:async()=>{const i=await(await C("/api/debug/user-data")).json();return console.log("Debug user data:",i),i}});const L=Y({mutationFn:async({quizId:a,updates:i})=>{const c=await C(`/api/quizzes/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!c.ok)throw new Error("Failed to update quiz");return c.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/user/quizzes"]}),n.invalidateQueries({queryKey:["/api/user/quiz-folders"]}),l({title:"Quiz updated successfully"}),y(null),N(!1),b({name:"",folder:"",tags:""})},onError:()=>{l({title:"Failed to update quiz",variant:"destructive"})}}),Je=Y({mutationFn:async a=>{const i=await C(`/api/quizzes/${a}`,{method:"DELETE"});if(!i.ok){const c=await i.json().catch(()=>({error:"Unknown error"}));throw new Error(c.error||"Failed to delete quiz")}return i.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/user/quizzes"]}),n.invalidateQueries({queryKey:["/api/user/quiz-folders"]}),n.invalidateQueries({queryKey:["/api/user/statistics"]}),n.invalidateQueries({queryKey:["/api/user/uploads"]}),l({title:"Quiz deleted successfully"})},onError:a=>{console.error("Delete quiz error:",a),l({title:"Failed to delete quiz",description:a.message,variant:"destructive"})}}),Xe=()=>{r()},es=a=>{var i;y(a),b({name:a.name||"",folder:a.folder||"",tags:((i=a.tags)==null?void 0:i.join(", "))||""}),N(!0)},ss=()=>{if(!h)return;const a={};p.name&&(a.name=p.name),p.folder&&(a.folder=p.folder),p.tags&&(a.tags=p.tags.split(",").map(i=>i.trim()).filter(i=>i)),L.mutate({quizId:h.id,updates:a})},as=a=>{Je.mutate(a)},ts=()=>{y(null),N(!1),b({name:"",folder:"",tags:""})},U=(E==null?void 0:E.filter(a=>{var d,D,H;const i=!u||((d=a.name)==null?void 0:d.toLowerCase().includes(u.toLowerCase()))||((D=a.folder)==null?void 0:D.toLowerCase().includes(u.toLowerCase()))||((H=a.tags)==null?void 0:H.some(rs=>rs.toLowerCase().includes(u.toLowerCase()))),c=x==="all"||x==="uncategorized"&&!a.folder||a.folder===x;return i&&c}))||[];return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx("div",{className:"min-h-screen relative overflow-hidden",style:{background:"linear-gradient(135deg, #f8fafc 0%, #BDBFA3 30%, #B6E2D3 70%, #f8fafc 100%)"},children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("header",{className:"shadow-sm",style:{backgroundColor:"#61C2A2"},children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ds,{size:"md"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"ClariTA"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[s&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-white/90 bg-white/20 px-3 py-2 rounded-lg",children:[e.jsx(Rs,{className:"h-4 w-4"}),e.jsx("span",{"data-testid":"text-user-name",children:s.fullName||s.email||"User"})]}),e.jsx(fa,{children:e.jsxs(g,{variant:"outline",className:"text-white bg-white/20 border-white/30 hover:bg-white/30 hover:text-white","data-testid":"button-feedback",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Found an issue?"]})}),e.jsxs(g,{variant:"outline",onClick:Xe,"data-testid":"button-logout",className:"text-white bg-white/20 border-white/30 hover:bg-white/30 hover:text-white",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsxs("h2",{className:"text-5xl font-bold mb-4",style:{color:"#09224E"},children:["Welcome back, ",e.jsxs("span",{style:{color:"#61C2A2"},children:[((W=s==null?void 0:s.fullName)==null?void 0:W.split(" ")[0])||((K=s==null?void 0:s.email)==null?void 0:K.split("@")[0])||"Student","!"]})]}),e.jsx("p",{className:"text-xl max-w-2xl mx-auto leading-relaxed",style:{color:"#09224E"},children:"Upload a new PDF to generate quizzes or view your quiz history. Transform your learning experience with AI-powered assessments!"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs($,{className:"border-0 shadow-2xl bg-white/80 backdrop-blur-sm",children:[e.jsx(_,{className:"pb-6",children:e.jsxs(Q,{className:"flex items-center text-2xl",style:{color:"#09224E"},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"#09224E"},children:e.jsx(V,{className:"h-5 w-5 text-white"})}),"Quick Actions"]})}),e.jsx(B,{className:"space-y-4",children:e.jsx(T,{href:"/upload",children:e.jsxs(g,{className:"w-full h-12 text-white font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg",style:{backgroundColor:"#61C2A2"},"data-testid":"button-upload-new",children:[e.jsx(qs,{className:"h-5 w-5 mr-2"}),"Upload New PDF"]})})})]}),e.jsxs($,{className:"mt-8 border-0 shadow-2xl bg-white/80 backdrop-blur-sm",children:[e.jsx(_,{className:"pb-6",children:e.jsxs(Q,{className:"flex items-center text-2xl",style:{color:"#09224E"},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"#09224E"},children:e.jsx(Os,{className:"h-5 w-5 text-white"})}),"Your Statistics"]})}),e.jsx(B,{children:Ze?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading statistics..."}):M?e.jsxs("div",{className:"text-center py-4 text-red-500",children:[e.jsx("p",{children:"Error loading statistics"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:M.message})]}):v?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{className:"text-center p-4 rounded-lg",style:{backgroundColor:"#B6E2D3"},children:[e.jsx(Ls,{className:"h-6 w-6 mx-auto mb-2",style:{color:"#09224E"}}),e.jsx("div",{className:"text-2xl font-bold",style:{color:"#09224E"},children:v.quizzesCompletedThisMonth}),e.jsx("div",{className:"text-xs",style:{color:"#09224E"},children:"This Month"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",style:{color:"#09224E"},children:[e.jsx($s,{className:"h-4 w-4"}),"Streaks"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 rounded",style:{backgroundColor:"#AFC8C4"},children:[e.jsx("div",{className:"font-semibold",style:{color:"#09224E"},children:v.currentStreak}),e.jsx("div",{className:"text-xs",style:{color:"#09224E"},children:"Current"})]}),e.jsxs("div",{className:"text-center p-3 rounded",style:{backgroundColor:"#CFD6C2"},children:[e.jsx("div",{className:"font-semibold",style:{color:"#09224E"},children:v.maxStreak}),e.jsx("div",{className:"text-xs",style:{color:"#09224E"},children:"Best"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",style:{color:"#09224E"},children:[e.jsx(_s,{className:"h-4 w-4"}),"Performance"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{style:{color:"#09224E"},children:"Accuracy Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 rounded-full h-2",style:{backgroundColor:"#ffffff"},children:e.jsx("div",{className:"h-2 rounded-full",style:{backgroundColor:"#61C2A2",width:`${Math.min(v.accuracyRate,100)}%`}})}),e.jsxs("span",{className:"font-medium w-12 text-right",style:{color:"#09224E"},children:[v.accuracyRate,"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{style:{color:"#09224E"},children:"Average Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 rounded-full h-2",style:{backgroundColor:"#ffffff"},children:e.jsx("div",{className:"h-2 rounded-full",style:{backgroundColor:"#09224E",width:`${Math.min(v.averageScore,100)}%`}})}),e.jsxs("span",{className:"font-medium w-12 text-right",style:{color:"#09224E"},children:[v.averageScore,"%"]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",style:{color:"#09224E"},children:[e.jsx(Qs,{className:"h-4 w-4"}),"Total Activity"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"text-center p-3 rounded",style:{backgroundColor:"#AFC8C4"},children:[e.jsx("div",{className:"font-semibold",style:{color:"#09224E"},children:v.totalQuizzesTaken}),e.jsx("div",{className:"text-xs",style:{color:"#09224E"},children:"Quizzes Taken"})]}),e.jsxs("div",{className:"text-center p-3 rounded",style:{backgroundColor:"#CFD6C2"},children:[e.jsx("div",{className:"font-semibold",style:{color:"#09224E"},children:v.totalQuizzesGenerated}),e.jsx("div",{className:"text-xs",style:{color:"#09224E"},children:"Quizzes Generated"})]})]})]})]}):e.jsxs("div",{className:"text-center py-4",style:{color:"#09224E"},children:[e.jsx(Bs,{className:"h-8 w-8 mx-auto mb-2",style:{color:"#09224E"}}),e.jsx("p",{children:"No statistics available yet"}),e.jsx("p",{className:"text-xs mt-1",style:{color:"#09224E"},children:"Complete some quizzes to see your progress"})]})})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs($,{className:"border-0 shadow-2xl bg-white/80 backdrop-blur-sm",children:[e.jsxs(_,{className:"pb-6",children:[e.jsxs(Q,{className:"flex items-center text-2xl",style:{color:"#09224E"},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"#09224E"},children:e.jsx(Is,{className:"h-5 w-5 text-white"})}),"Quiz Management"]}),e.jsx(ks,{className:"text-lg",style:{color:"#09224E"},children:"Manage your quizzes with search, filters, and organization tools"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ms,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(z,{placeholder:"Search quizzes by name, folder, or tags...",value:u,onChange:a=>j(a.target.value),className:"pl-10 h-12 border-0 shadow-lg bg-white/80 backdrop-blur-sm"})]}),e.jsxs(Zs,{value:x,onValueChange:A,children:[e.jsx(je,{className:"w-full sm:w-48 h-12 border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:e.jsx(Js,{placeholder:"Filter by folder"})}),e.jsxs(ve,{children:[e.jsx(R,{value:"all",children:"All Folders"}),e.jsx(R,{value:"uncategorized",children:"Uncategorized"}),O==null?void 0:O.map(a=>e.jsx(R,{value:a,children:a},a))]})]})]})]}),e.jsx(B,{children:Ve?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-teal-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg",style:{color:"#09224E"},children:"Loading quizzes..."})]}):U.length>0?e.jsx("div",{className:"space-y-4",children:U.map(a=>{const i=f==null?void 0:f.find(c=>c.id===a.uploadId);return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start items-center p-6 border-0 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 bg-white hover:-translate-y-1 hover:scale-102 gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#61C2A2"},children:e.jsx(Us,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",style:{color:"#09224E"},children:a.name||`Quiz from ${(i==null?void 0:i.fileName)||"Unknown"}`}),a.folder&&e.jsxs(G,{variant:"secondary",className:"text-xs bg-green-100 text-green-800 border-green-200 flex-shrink-0",children:[e.jsx(Ws,{className:"h-3 w-3 mr-1"}),a.folder]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm mb-2 flex-wrap",style:{color:"#6B7280"},children:[e.jsxs("span",{className:"truncate",children:["From: ",i==null?void 0:i.fileName]}),e.jsx("span",{className:"flex-shrink-0",children:"•"}),e.jsxs("span",{className:"flex-shrink-0",children:[Object.values(a.meta.countsByType).reduce((c,d)=>c+d,0)," questions"]}),e.jsx("span",{className:"flex-shrink-0",children:"•"}),e.jsxs("span",{className:"flex-shrink-0",children:["Created ",new Date(a.createdAt).toLocaleDateString()]})]}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map(c=>e.jsxs(G,{variant:"outline",className:"text-xs border-teal-200 text-teal-700",children:[e.jsx(Ks,{className:"h-3 w-3 mr-1"}),c]},c))})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 w-full sm:w-auto justify-center sm:justify-start",children:[a.hasAttempts?e.jsx(T,{href:`/quiz-results/${a.id}`,children:e.jsx(g,{className:"h-10 px-4 text-white font-medium shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg",style:{backgroundColor:"#61C2A2"},children:"View Results"})}):e.jsx(T,{href:`/quiz/${a.id}`,children:e.jsx(g,{className:"h-10 px-4 text-white font-medium shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg",style:{backgroundColor:"#61C2A2"},children:"Take Quiz"})}),e.jsxs(ce,{open:P&&(h==null?void 0:h.id)===a.id,onOpenChange:N,children:[e.jsx(de,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>es(a),className:"h-10 w-10 hover:bg-teal-100",children:e.jsx(Hs,{className:"h-4 w-4"})})}),e.jsxs(me,{children:[e.jsxs(ue,{children:[e.jsx(xe,{children:"Edit Quiz"}),e.jsx(he,{children:"Update the quiz name, folder, and tags."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"name",children:"Quiz Name"}),e.jsx(z,{id:"name",value:p.name,onChange:c=>b(d=>({...d,name:c.target.value})),placeholder:"Enter quiz name"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"folder",children:"Folder"}),e.jsx(z,{id:"folder",value:p.folder,onChange:c=>b(d=>({...d,folder:c.target.value})),placeholder:"Enter folder name"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(z,{id:"tags",value:p.tags,onChange:c=>b(d=>({...d,tags:c.target.value})),placeholder:"e.g., database, sql, advanced"})]})]}),e.jsxs(pe,{children:[e.jsx(g,{variant:"outline",onClick:ts,children:"Cancel"}),e.jsx(g,{onClick:ss,disabled:L.isPending,style:{backgroundColor:"#61C2A2"},children:L.isPending?"Saving...":"Save Changes"})]})]})]}),e.jsxs(xa,{children:[e.jsx(ha,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"sm",className:"h-10 w-10 hover:bg-red-100",children:e.jsx(Ys,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(Ie,{children:[e.jsxs(Me,{children:[e.jsx(We,{children:"Delete Quiz"}),e.jsx(Ke,{children:"Are you sure you want to delete this quiz? This action cannot be undone."})]}),e.jsxs(Ue,{children:[e.jsx(Ye,{children:"Cancel"}),e.jsx(He,{onClick:()=>as(a.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]},a.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",style:{backgroundColor:"#B6E2D3"},children:e.jsx(Gs,{className:"h-10 w-10",style:{color:"#09224E"}})}),e.jsx("h3",{className:"text-2xl font-semibold mb-3",style:{color:"#09224E"},children:u||x!=="all"?"No quizzes found":"No quizzes yet"}),e.jsx("p",{className:"text-lg mb-6",style:{color:"#6B7280"},children:u||x!=="all"?"Try adjusting your search or filter criteria.":"Upload a PDF and generate your first quiz to get started."}),!u&&x==="all"&&e.jsx(T,{href:"/upload",children:e.jsxs(g,{className:"h-12 px-8 text-white font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg",style:{backgroundColor:"#61C2A2"},children:[e.jsx(V,{className:"h-5 w-5 mr-2"}),"Upload Your First PDF",e.jsx(Vs,{className:"ml-2 h-5 w-5"})]})})]})})]})})]})]})]})})}export{Da as default};
