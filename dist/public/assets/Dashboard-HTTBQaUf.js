import{H as Ge,J as Ye,j as e,K as Y,L as Ze,M as Z,N as J,Q as Je,U as X,W as Xe,X as ee,Y as se,Z as es,$ as ss,a0 as ae,c as as,a1 as te,y as ts,O as rs,u as re,a2 as ls,s as os,e as is,v as ns,w as ds,t as le,x as cs,z as ms,o as xs}from"./ui-D6VjsBYi.js";import{c as m,h as oe,i as us,u as hs,B as f,C as L,d as O,e as $,g as _,f as W,I as z,D as gs,j as ps,k as fs,l as js,m as ys,n as Ns,L as Q,o as vs}from"./index-DCPyX0L0.js";import{b as ws,c as D,u as K}from"./query-BZa0afV1.js";import{L as S}from"./router-CF8zxTMD.js";import{B as H}from"./badge-BThhwP-r.js";import{r as i}from"./vendor-CbTYwD9p.js";import{m as ie,n as bs,e as Cs,B as F,o as Ds,p as As,P as V,q as ks,A as G,C as zs,r as Ss,Z as Fs,s as Ts,l as Es,a as Rs,t as Ps,u as qs,v as Ls,w as Os,x as $s}from"./icons-BVLFyzTP.js";import{a as y}from"./api-BSo0G3p6.js";const _s=Ge,Qs=Ye,ne=i.forwardRef(({className:s,children:t,...r},l)=>e.jsxs(Y,{ref:l,className:m("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(Ze,{asChild:!0,children:e.jsx(ie,{className:"h-4 w-4 opacity-50"})})]}));ne.displayName=Y.displayName;const de=i.forwardRef(({className:s,...t},r)=>e.jsx(Z,{ref:r,className:m("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(bs,{className:"h-4 w-4"})}));de.displayName=Z.displayName;const ce=i.forwardRef(({className:s,...t},r)=>e.jsx(J,{ref:r,className:m("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ie,{className:"h-4 w-4"})}));ce.displayName=J.displayName;const me=i.forwardRef(({className:s,children:t,position:r="popper",...l},d)=>e.jsx(Je,{children:e.jsxs(X,{ref:d,className:m("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...l,children:[e.jsx(de,{}),e.jsx(Xe,{className:m("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(ce,{})]})}));me.displayName=X.displayName;const Is=i.forwardRef(({className:s,...t},r)=>e.jsx(ee,{ref:r,className:m("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));Is.displayName=ee.displayName;const T=i.forwardRef(({className:s,children:t,...r},l)=>e.jsxs(se,{ref:l,className:m("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(es,{children:e.jsx(Cs,{className:"h-4 w-4"})})}),e.jsx(ss,{children:t})]}));T.displayName=se.displayName;const Ms=i.forwardRef(({className:s,...t},r)=>e.jsx(ae,{ref:r,className:m("-mx-1 my-1 h-px bg-muted",s),...t}));Ms.displayName=ae.displayName;var xe="AlertDialog",[Bs,ua]=as(xe,[te]),j=te(),ue=s=>{const{__scopeAlertDialog:t,...r}=s,l=j(t);return e.jsx(cs,{...l,...r,modal:!0})};ue.displayName=xe;var Us="AlertDialogTrigger",he=i.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,d=j(r);return e.jsx(ts,{...d,...l,ref:t})});he.displayName=Us;var Ws="AlertDialogPortal",ge=s=>{const{__scopeAlertDialog:t,...r}=s,l=j(t);return e.jsx(ms,{...l,...r})};ge.displayName=Ws;var Ks="AlertDialogOverlay",pe=i.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,d=j(r);return e.jsx(rs,{...d,...l,ref:t})});pe.displayName=Ks;var C="AlertDialogContent",[Hs,Vs]=Bs(C),Gs=xs("AlertDialogContent"),fe=i.forwardRef((s,t)=>{const{__scopeAlertDialog:r,children:l,...d}=s,x=j(r),v=i.useRef(null),g=re(t,v),A=i.useRef(null);return e.jsx(ls,{contentName:C,titleName:je,docsSlug:"alert-dialog",children:e.jsx(Hs,{scope:r,cancelRef:A,children:e.jsxs(os,{role:"alertdialog",...x,...d,ref:g,onOpenAutoFocus:is(d.onOpenAutoFocus,u=>{var w;u.preventDefault(),(w=A.current)==null||w.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[e.jsx(Gs,{children:l}),e.jsx(Zs,{contentRef:v})]})})})});fe.displayName=C;var je="AlertDialogTitle",ye=i.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,d=j(r);return e.jsx(ns,{...d,...l,ref:t})});ye.displayName=je;var Ne="AlertDialogDescription",ve=i.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,d=j(r);return e.jsx(ds,{...d,...l,ref:t})});ve.displayName=Ne;var Ys="AlertDialogAction",we=i.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,d=j(r);return e.jsx(le,{...d,...l,ref:t})});we.displayName=Ys;var be="AlertDialogCancel",Ce=i.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...l}=s,{cancelRef:d}=Vs(be,r),x=j(r),v=re(t,d);return e.jsx(le,{...x,...l,ref:v})});Ce.displayName=be;var Zs=({contentRef:s})=>{const t=`\`${C}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${C}\` by passing a \`${Ne}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${C}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{var l;document.getElementById((l=s.current)==null?void 0:l.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},Js=ue,Xs=he,ea=ge,De=pe,Ae=fe,ke=we,ze=Ce,Se=ye,Fe=ve;const sa=Js,aa=Xs,ta=ea,Te=i.forwardRef(({className:s,...t},r)=>e.jsx(De,{className:m("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));Te.displayName=De.displayName;const Ee=i.forwardRef(({className:s,...t},r)=>e.jsxs(ta,{children:[e.jsx(Te,{}),e.jsx(Ae,{ref:r,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));Ee.displayName=Ae.displayName;const Re=({className:s,...t})=>e.jsx("div",{className:m("flex flex-col space-y-2 text-center sm:text-left",s),...t});Re.displayName="AlertDialogHeader";const Pe=({className:s,...t})=>e.jsx("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Pe.displayName="AlertDialogFooter";const qe=i.forwardRef(({className:s,...t},r)=>e.jsx(Se,{ref:r,className:m("text-lg font-semibold",s),...t}));qe.displayName=Se.displayName;const Le=i.forwardRef(({className:s,...t},r)=>e.jsx(Fe,{ref:r,className:m("text-sm text-muted-foreground",s),...t}));Le.displayName=Fe.displayName;const Oe=i.forwardRef(({className:s,...t},r)=>e.jsx(ke,{ref:r,className:m(oe(),s),...t}));Oe.displayName=ke.displayName;const $e=i.forwardRef(({className:s,...t},r)=>e.jsx(ze,{ref:r,className:m(oe({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));$e.displayName=ze.displayName;function ha(){var B;const{user:s,loading:t,signOut:r}=us(),{toast:l}=hs(),d=ws(),[x,v]=i.useState(""),[g,A]=i.useState("all"),[u,w]=i.useState(null),[p,b]=i.useState({name:"",folder:"",tags:""}),[_e,k]=i.useState(!1),{data:E,isLoading:ra}=D({queryKey:["/api/user/uploads"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>(await y("/api/user/uploads")).json()}),{data:R,isLoading:Qe}=D({queryKey:["/api/user/quizzes"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>{const o=await(await y("/api/user/quizzes")).json();return await Promise.all(o.map(async c=>{try{console.log("Checking attempts for quiz:",c.id);const N=await y(`/api/quizzes/${c.id}/latest-attempt`);return console.log("Attempt response for quiz",c.id,":",N.ok),{...c,hasAttempts:N.ok}}catch(N){return console.log("Error checking attempts for quiz",c.id,":",N),{...c,hasAttempts:!1}}}))}}),{data:P}=D({queryKey:["/api/user/quiz-folders"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>(await y("/api/user/quiz-folders")).json()}),{data:h,isLoading:Ie,error:I}=D({queryKey:["/api/user/statistics"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>{console.log("Fetching user statistics...");const a=await y("/api/user/statistics");if(console.log("Statistics response status:",a.status),!a.ok){const n=await a.text();throw console.error("Statistics API error:",n),new Error(`Failed to fetch statistics: ${a.status} - ${n}`)}const o=await a.json();return console.log("Statistics data received:",o),o}});D({queryKey:["/api/debug/user-data"],retry:!1,refetchOnWindowFocus:!1,queryFn:async()=>{const o=await(await y("/api/debug/user-data")).json();return console.log("Debug user data:",o),o}});const q=K({mutationFn:async({quizId:a,updates:o})=>{const n=await y(`/api/quizzes/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!n.ok)throw new Error("Failed to update quiz");return n.json()},onSuccess:()=>{d.invalidateQueries({queryKey:["/api/user/quizzes"]}),d.invalidateQueries({queryKey:["/api/user/quiz-folders"]}),l({title:"Quiz updated successfully"}),w(null),k(!1),b({name:"",folder:"",tags:""})},onError:()=>{l({title:"Failed to update quiz",variant:"destructive"})}}),Me=K({mutationFn:async a=>{const o=await y(`/api/quizzes/${a}`,{method:"DELETE"});if(!o.ok){const n=await o.json().catch(()=>({error:"Unknown error"}));throw new Error(n.error||"Failed to delete quiz")}return o.json()},onSuccess:()=>{d.invalidateQueries({queryKey:["/api/user/quizzes"]}),d.invalidateQueries({queryKey:["/api/user/quiz-folders"]}),l({title:"Quiz deleted successfully"})},onError:a=>{console.error("Delete quiz error:",a),l({title:"Failed to delete quiz",description:a.message,variant:"destructive"})}}),Be=()=>{r()},Ue=a=>{var o;w(a),b({name:a.name||"",folder:a.folder||"",tags:((o=a.tags)==null?void 0:o.join(", "))||""}),k(!0)},We=()=>{if(!u)return;const a={};p.name&&(a.name=p.name),p.folder&&(a.folder=p.folder),p.tags&&(a.tags=p.tags.split(",").map(o=>o.trim()).filter(o=>o)),q.mutate({quizId:u.id,updates:a})},Ke=a=>{Me.mutate(a)},He=()=>{w(null),k(!1),b({name:"",folder:"",tags:""})},M=(R==null?void 0:R.filter(a=>{var c,N,U;const o=!x||((c=a.name)==null?void 0:c.toLowerCase().includes(x.toLowerCase()))||((N=a.folder)==null?void 0:N.toLowerCase().includes(x.toLowerCase()))||((U=a.tags)==null?void 0:U.some(Ve=>Ve.toLowerCase().includes(x.toLowerCase()))),n=g==="all"||g==="uncategorized"&&!a.folder||a.folder===g;return o&&n}))||[];return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen relative overflow-hidden",style:{background:"linear-gradient(135deg, #f5e2aa 0%, #fef7e0 50%, #f5e2aa 100%)"},children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-20 left-10 w-16 h-16 rounded-full",style:{backgroundColor:"#dc5817"}}),e.jsx("div",{className:"absolute top-32 right-20 w-12 h-12 rounded-full",style:{backgroundColor:"#6b2d16"}}),e.jsx("div",{className:"absolute bottom-20 left-1/4 w-20 h-20 rounded-full",style:{backgroundColor:"#de8318"}}),e.jsx("div",{className:"absolute bottom-32 right-1/3 w-14 h-14 rounded-full",style:{backgroundColor:"#dc5817"}}),e.jsx("div",{className:"absolute top-40 left-1/3 w-8 h-8 transform rotate-45",style:{backgroundColor:"#6b2d16"}}),e.jsx("div",{className:"absolute bottom-40 right-1/4 w-6 h-6 transform rotate-12",style:{backgroundColor:"#de8318"}}),e.jsx("div",{className:"absolute top-1/2 left-1/6 w-10 h-10 rounded-full",style:{backgroundColor:"#dc5817"}}),e.jsx("div",{className:"absolute top-1/3 right-1/6 w-8 h-8 rounded-full",style:{backgroundColor:"#6b2d16"}}),e.jsx("div",{className:"absolute bottom-1/3 left-1/2 w-12 h-12 rounded-full",style:{backgroundColor:"#de8318"}})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("header",{className:"shadow-sm",style:{backgroundColor:"#de8318"},children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-8 w-8 text-white"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"ClariTA"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[s&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-white/90 bg-white/20 px-3 py-2 rounded-lg",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx("span",{"data-testid":"text-user-name",children:s.fullName||s.email||"User"})]}),e.jsxs(f,{variant:"outline",onClick:Be,"data-testid":"button-logout",className:"text-white bg-white/20 border-white/30 hover:bg-white/30 hover:text-white",children:[e.jsx(As,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsxs("h2",{className:"text-5xl font-bold mb-4",style:{color:"#6b2d16"},children:["Welcome back, ",e.jsxs("span",{style:{color:"#dc5817"},children:[((B=s==null?void 0:s.fullName)==null?void 0:B.split(" ")[0])||"Student","!"]})]}),e.jsx("p",{className:"text-xl max-w-2xl mx-auto leading-relaxed",style:{color:"#6b2d16"},children:"Upload a new PDF to generate quizzes or view your quiz history. Transform your learning experience with AI-powered assessments!"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(L,{className:"border-0 shadow-2xl bg-white/95 backdrop-blur-sm hover:shadow-3xl transition-all duration-300 hover:scale-105",children:[e.jsx(O,{className:"pb-6",children:e.jsxs($,{className:"flex items-center text-2xl",style:{color:"#1F2937"},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"#de8318"},children:e.jsx(V,{className:"h-5 w-5 text-white"})}),"Quick Actions"]})}),e.jsx(_,{className:"space-y-4",children:e.jsx(S,{href:"/upload",children:e.jsxs(f,{className:"w-full h-12 text-white font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg",style:{backgroundColor:"#F17105"},"data-testid":"button-upload-new",children:[e.jsx(ks,{className:"h-5 w-5 mr-2"}),"Upload New PDF",e.jsx(G,{className:"ml-2 h-5 w-5"})]})})})]}),e.jsxs(L,{className:"mt-6",children:[e.jsxs(O,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-5 w-5"}),"Learning Statistics"]}),e.jsx(W,{children:"Your quiz performance and progress metrics"})]}),e.jsx(_,{children:Ie?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading statistics..."}):I?e.jsxs("div",{className:"text-center py-4 text-red-500",children:[e.jsx("p",{children:"Error loading statistics"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:I.message})]}):h?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsx(Ss,{className:"h-6 w-6 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:h.quizzesCompletedThisMonth}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"This Month"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(Fs,{className:"h-4 w-4"}),"Streaks"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-950 rounded",children:[e.jsx("div",{className:"font-semibold text-orange-600 dark:text-orange-400",children:h.currentStreak}),e.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Current"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-950 rounded",children:[e.jsx("div",{className:"font-semibold text-purple-600 dark:text-purple-400",children:h.maxStreak}),e.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Best"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(Ts,{className:"h-4 w-4"}),"Performance"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Accuracy Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${Math.min(h.accuracyRate,100)}%`}})}),e.jsxs("span",{className:"font-medium w-12 text-right",children:[h.accuracyRate,"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Average Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(h.averageScore,100)}%`}})}),e.jsxs("span",{className:"font-medium w-12 text-right",children:[h.averageScore,"%"]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(Es,{className:"h-4 w-4"}),"Total Activity"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"text-center p-3 bg-indigo-50 dark:bg-indigo-950 rounded",children:[e.jsx("div",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:h.totalQuizzesTaken}),e.jsx("div",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:"Quizzes Taken"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[e.jsx("div",{className:"font-semibold text-gray-600 dark:text-gray-400",children:h.totalQuizzesGenerated}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Quizzes Generated"})]})]})]})]}):e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(Rs,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No statistics available yet"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Complete some quizzes to see your progress"})]})})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(L,{className:"border-0 shadow-2xl bg-white/95 backdrop-blur-sm hover:shadow-3xl transition-all duration-300",children:[e.jsxs(O,{className:"pb-6",children:[e.jsxs($,{className:"flex items-center text-2xl",style:{color:"#1F2937"},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"#6b2d16"},children:e.jsx(F,{className:"h-5 w-5 text-white"})}),"Quiz Management"]}),e.jsx(W,{className:"text-lg",style:{color:"#1F2937"},children:"Manage your quizzes with search, filters, and organization tools"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(z,{placeholder:"Search quizzes by name, folder, or tags...",value:x,onChange:a=>v(a.target.value),className:"pl-10 h-12 border-0 shadow-lg bg-white/80 backdrop-blur-sm"})]}),e.jsxs(_s,{value:g,onValueChange:A,children:[e.jsx(ne,{className:"w-full sm:w-48 h-12 border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:e.jsx(Qs,{placeholder:"Filter by folder"})}),e.jsxs(me,{children:[e.jsx(T,{value:"all",children:"All Folders"}),e.jsx(T,{value:"uncategorized",children:"Uncategorized"}),P==null?void 0:P.map(a=>e.jsx(T,{value:a,children:a},a))]})]})]})]}),e.jsx(_,{children:Qe?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-orange-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg",style:{color:"#1F2937"},children:"Loading quizzes..."})]}):M.length>0?e.jsx("div",{className:"space-y-4",children:M.map(a=>{const o=E==null?void 0:E.find(n=>n.id===a.uploadId);return e.jsxs("div",{className:"flex items-center justify-between p-6 border-0 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 bg-white hover:-translate-y-1 hover:scale-105",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:"#de8318"},children:e.jsx(F,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",style:{color:"#1F2937"},children:a.name||`Quiz from ${(o==null?void 0:o.fileName)||"Unknown"}`}),a.folder&&e.jsxs(H,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800 border-orange-200",children:[e.jsx(qs,{className:"h-3 w-3 mr-1"}),a.folder]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm mb-2",style:{color:"#6B7280"},children:[e.jsxs("span",{children:["From: ",o==null?void 0:o.fileName]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[Object.values(a.meta.countsByType).reduce((n,c)=>n+c,0)," questions"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Created ",new Date(a.createdAt).toLocaleDateString()]})]}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map(n=>e.jsxs(H,{variant:"outline",className:"text-xs border-orange-200 text-orange-700",children:[e.jsx(Ls,{className:"h-3 w-3 mr-1"}),n]},n))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[a.hasAttempts?e.jsx(S,{href:`/quiz-results/${a.id}`,children:e.jsx(f,{className:"h-10 px-4 text-white font-medium shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg",style:{backgroundColor:"#dc5817"},children:"View Results"})}):e.jsx(S,{href:`/quiz/${a.id}`,children:e.jsx(f,{className:"h-10 px-4 text-white font-medium shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg",style:{backgroundColor:"#dc5817"},children:"Take Quiz"})}),e.jsxs(gs,{open:_e&&(u==null?void 0:u.id)===a.id,onOpenChange:k,children:[e.jsx(ps,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>Ue(a),className:"h-10 w-10 hover:bg-orange-100",children:e.jsx(Os,{className:"h-4 w-4"})})}),e.jsxs(fs,{children:[e.jsxs(js,{children:[e.jsx(ys,{children:"Edit Quiz"}),e.jsx(Ns,{children:"Update the quiz name, folder, and tags."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"name",children:"Quiz Name"}),e.jsx(z,{id:"name",value:p.name,onChange:n=>b(c=>({...c,name:n.target.value})),placeholder:"Enter quiz name"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"folder",children:"Folder"}),e.jsx(z,{id:"folder",value:p.folder,onChange:n=>b(c=>({...c,folder:n.target.value})),placeholder:"Enter folder name"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(z,{id:"tags",value:p.tags,onChange:n=>b(c=>({...c,tags:n.target.value})),placeholder:"e.g., database, sql, advanced"})]})]}),e.jsxs(vs,{children:[e.jsx(f,{variant:"outline",onClick:He,children:"Cancel"}),e.jsx(f,{onClick:We,disabled:q.isPending,style:{backgroundColor:"#dc5817"},children:q.isPending?"Saving...":"Save Changes"})]})]})]}),e.jsxs(sa,{children:[e.jsx(aa,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",className:"h-10 w-10 hover:bg-red-100",children:e.jsx($s,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(Ee,{children:[e.jsxs(Re,{children:[e.jsx(qe,{children:"Delete Quiz"}),e.jsx(Le,{children:"Are you sure you want to delete this quiz? This action cannot be undone."})]}),e.jsxs(Pe,{children:[e.jsx($e,{children:"Cancel"}),e.jsx(Oe,{onClick:()=>Ke(a.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]},a.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",style:{backgroundColor:"#f5e2aa"},children:e.jsx(F,{className:"h-10 w-10",style:{color:"#6b2d16"}})}),e.jsx("h3",{className:"text-2xl font-semibold mb-3",style:{color:"#1F2937"},children:x||g!=="all"?"No quizzes found":"No quizzes yet"}),e.jsx("p",{className:"text-lg mb-6",style:{color:"#6B7280"},children:x||g!=="all"?"Try adjusting your search or filter criteria.":"Upload a PDF and generate your first quiz to get started."}),!x&&g==="all"&&e.jsx(S,{href:"/upload",children:e.jsxs(f,{className:"h-12 px-8 text-white font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg",style:{backgroundColor:"#F17105"},children:[e.jsx(V,{className:"h-5 w-5 mr-2"}),"Upload Your First PDF",e.jsx(G,{className:"ml-2 h-5 w-5"})]})})]})})]})})]})]})]})]})}export{ha as default};
