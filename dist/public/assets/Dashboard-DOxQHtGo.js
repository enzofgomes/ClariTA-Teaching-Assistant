import{H as as,J as ts,j as e,K as X,L as rs,M as Z,N as ee,Q as ls,U as se,W as ns,X as ae,Y as te,Z as is,$ as os,a0 as re,c as ds,a1 as le,y as cs,O as ms,u as ne,a2 as xs,s as us,e as gs,v as ps,w as hs,t as ie,x as fs,z as js,o as ys}from"./ui-D6VjsBYi.js";import{c as g,h as oe,i as Ns,u as vs,B as w,C as _,d as U,e as M,g as I,f as ws,I as E,D as bs,j as Ds,k as As,l as Cs,m as zs,n as ks,L as B,o as Qs}from"./index-X69ZQDH-.js";import{b as Ss,c as W,u as V}from"./query-BZa0afV1.js";import{L as P}from"./router-CF8zxTMD.js";import{B as Y}from"./badge-C4faGhk4.js";import{r as n}from"./vendor-CbTYwD9p.js";import{n as de,o as Ts,e as Fs,B as K,p as Es,q as Ps,P as G,F as J,C as Rs,T as Os,r as Ls,s as $s,t as qs,u as _s,v as Us,w as Ms}from"./icons-6VhNX1p2.js";import{a as Q}from"./api-BnTOs7Wk.js";const Is=as,Bs=ts,ce=n.forwardRef(({className:a,children:t,...r},l)=>e.jsxs(X,{ref:l,className:g("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...r,children:[t,e.jsx(rs,{asChild:!0,children:e.jsx(de,{className:"h-4 w-4 opacity-50"})})]}));ce.displayName=X.displayName;const me=n.forwardRef(({className:a,...t},r)=>e.jsx(Z,{ref:r,className:g("flex cursor-default items-center justify-center py-1",a),...t,children:e.jsx(Ts,{className:"h-4 w-4"})}));me.displayName=Z.displayName;const xe=n.forwardRef(({className:a,...t},r)=>e.jsx(ee,{ref:r,className:g("flex cursor-default items-center justify-center py-1",a),...t,children:e.jsx(de,{className:"h-4 w-4"})}));xe.displayName=ee.displayName;const ue=n.forwardRef(({className:a,children:t,position:r="popper",...l},c)=>e.jsx(ls,{children:e.jsxs(se,{ref:c,className:g("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...l,children:[e.jsx(me,{}),e.jsx(ns,{className:g("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(xe,{})]})}));ue.displayName=se.displayName;const Ws=n.forwardRef(({className:a,...t},r)=>e.jsx(ae,{ref:r,className:g("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...t}));Ws.displayName=ae.displayName;const R=n.forwardRef(({className:a,children:t,...r},l)=>e.jsxs(te,{ref:l,className:g("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(is,{children:e.jsx(Fs,{className:"h-4 w-4"})})}),e.jsx(os,{children:t})]}));R.displayName=te.displayName;const Ks=n.forwardRef(({className:a,...t},r)=>e.jsx(re,{ref:r,className:g("-mx-1 my-1 h-px bg-muted",a),...t}));Ks.displayName=re.displayName;var ge="AlertDialog",[Hs,fa]=ds(ge,[le]),b=le(),pe=a=>{const{__scopeAlertDialog:t,...r}=a,l=b(t);return e.jsx(fs,{...l,...r,modal:!0})};pe.displayName=ge;var Vs="AlertDialogTrigger",he=n.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,c=b(r);return e.jsx(cs,{...c,...l,ref:t})});he.displayName=Vs;var Ys="AlertDialogPortal",fe=a=>{const{__scopeAlertDialog:t,...r}=a,l=b(t);return e.jsx(js,{...l,...r})};fe.displayName=Ys;var Gs="AlertDialogOverlay",je=n.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,c=b(r);return e.jsx(ms,{...c,...l,ref:t})});je.displayName=Gs;var S="AlertDialogContent",[Js,Xs]=Hs(S),Zs=ys("AlertDialogContent"),ye=n.forwardRef((a,t)=>{const{__scopeAlertDialog:r,children:l,...c}=a,h=b(r),C=n.useRef(null),N=ne(t,C),T=n.useRef(null);return e.jsx(xs,{contentName:S,titleName:Ne,docsSlug:"alert-dialog",children:e.jsx(Js,{scope:r,cancelRef:T,children:e.jsxs(us,{role:"alertdialog",...h,...c,ref:N,onOpenAutoFocus:gs(c.onOpenAutoFocus,f=>{var z;f.preventDefault(),(z=T.current)==null||z.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[e.jsx(Zs,{children:l}),e.jsx(sa,{contentRef:C})]})})})});ye.displayName=S;var Ne="AlertDialogTitle",ve=n.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,c=b(r);return e.jsx(ps,{...c,...l,ref:t})});ve.displayName=Ne;var we="AlertDialogDescription",be=n.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,c=b(r);return e.jsx(hs,{...c,...l,ref:t})});be.displayName=we;var ea="AlertDialogAction",De=n.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,c=b(r);return e.jsx(ie,{...c,...l,ref:t})});De.displayName=ea;var Ae="AlertDialogCancel",Ce=n.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,{cancelRef:c}=Xs(Ae,r),h=b(r),C=ne(t,c);return e.jsx(ie,{...h,...l,ref:C})});Ce.displayName=Ae;var sa=({contentRef:a})=>{const t=`\`${S}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${S}\` by passing a \`${we}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${S}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return n.useEffect(()=>{var l;document.getElementById((l=a.current)==null?void 0:l.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null},aa=pe,ta=he,ra=fe,ze=je,ke=ye,Qe=De,Se=Ce,Te=ve,Fe=be;const la=aa,na=ta,ia=ra,Ee=n.forwardRef(({className:a,...t},r)=>e.jsx(ze,{className:g("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:r}));Ee.displayName=ze.displayName;const Pe=n.forwardRef(({className:a,...t},r)=>e.jsxs(ia,{children:[e.jsx(Ee,{}),e.jsx(ke,{ref:r,className:g("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t})]}));Pe.displayName=ke.displayName;const Re=({className:a,...t})=>e.jsx("div",{className:g("flex flex-col space-y-2 text-center sm:text-left",a),...t});Re.displayName="AlertDialogHeader";const Oe=({className:a,...t})=>e.jsx("div",{className:g("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t});Oe.displayName="AlertDialogFooter";const Le=n.forwardRef(({className:a,...t},r)=>e.jsx(Te,{ref:r,className:g("text-lg font-semibold",a),...t}));Le.displayName=Te.displayName;const $e=n.forwardRef(({className:a,...t},r)=>e.jsx(Fe,{ref:r,className:g("text-sm text-muted-foreground",a),...t}));$e.displayName=Fe.displayName;const qe=n.forwardRef(({className:a,...t},r)=>e.jsx(Qe,{ref:r,className:g(oe(),a),...t}));qe.displayName=Qe.displayName;const _e=n.forwardRef(({className:a,...t},r)=>e.jsx(Se,{ref:r,className:g(oe({variant:"outline"}),"mt-2 sm:mt-0",a),...t}));_e.displayName=Se.displayName;function ja(){const{user:a,loading:t,signOut:r}=Ns(),{toast:l}=vs(),c=Ss(),[h,C]=n.useState(""),[N,T]=n.useState("all"),[f,z]=n.useState(null),[v,k]=n.useState({name:"",folder:"",tags:""}),[Ue,F]=n.useState(!1),{data:x,isLoading:oa}=W({queryKey:["/api/user/uploads"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>(await Q("/api/user/uploads")).json()}),{data:u,isLoading:Me}=W({queryKey:["/api/user/quizzes"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>{const i=await(await Q("/api/user/quizzes")).json();return await Promise.all(i.map(async m=>{try{console.log("Checking attempts for quiz:",m.id);const y=await Q(`/api/quizzes/${m.id}/latest-attempt`);return console.log("Attempt response for quiz",m.id,":",y.ok),{...m,hasAttempts:y.ok}}catch(y){return console.log("Error checking attempts for quiz",m.id,":",y),{...m,hasAttempts:!1}}}))}}),{data:O}=W({queryKey:["/api/user/quiz-folders"],retry:!1,refetchOnWindowFocus:!0,queryFn:async()=>(await Q("/api/user/quiz-folders")).json()}),L=V({mutationFn:async({quizId:s,updates:i})=>{const d=await Q(`/api/quizzes/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!d.ok)throw new Error("Failed to update quiz");return d.json()},onSuccess:()=>{c.invalidateQueries({queryKey:["/api/user/quizzes"]}),c.invalidateQueries({queryKey:["/api/user/quiz-folders"]}),l({title:"Quiz updated successfully"}),z(null),F(!1),k({name:"",folder:"",tags:""})},onError:()=>{l({title:"Failed to update quiz",variant:"destructive"})}}),Ie=V({mutationFn:async s=>{const i=await Q(`/api/quizzes/${s}`,{method:"DELETE"});if(!i.ok){const d=await i.json().catch(()=>({error:"Unknown error"}));throw new Error(d.error||"Failed to delete quiz")}return i.json()},onSuccess:()=>{c.invalidateQueries({queryKey:["/api/user/quizzes"]}),c.invalidateQueries({queryKey:["/api/user/quiz-folders"]}),l({title:"Quiz deleted successfully"})},onError:s=>{console.error("Delete quiz error:",s),l({title:"Failed to delete quiz",description:s.message,variant:"destructive"})}}),Be=()=>{r()},We=s=>{var i;z(s),k({name:s.name||"",folder:s.folder||"",tags:((i=s.tags)==null?void 0:i.join(", "))||""}),F(!0)},Ke=()=>{if(!f)return;const s={};v.name&&(s.name=v.name),v.folder&&(s.folder=v.folder),v.tags&&(s.tags=v.tags.split(",").map(i=>i.trim()).filter(i=>i)),L.mutate({quizId:f.id,updates:s})},He=s=>{Ie.mutate(s)},Ve=()=>{z(null),F(!1),k({name:"",folder:"",tags:""})},o=n.useMemo(()=>{if(!x||!u)return null;const s=x.length,i=u.length,d=x.reduce((p,j)=>p+j.pageCount,0),m=x.reduce((p,j)=>p+j.fileSize,0),y=u.reduce((p,j)=>p+Object.values(j.meta.countsByType).reduce((D,q)=>D+q,0),0),A=u.reduce((p,j)=>(Object.entries(j.meta.countsByType).forEach(([D,q])=>{p[D]=(p[D]||0)+q}),p),{}),$=A.mcq||0,Ye=A.tf||0,Ge=A.fill||0,Je=x.filter(p=>{const j=new Date(p.uploadedAt),D=new Date(Date.now()-7*24*60*60*1e3);return j>D}).length,Xe=u.filter(p=>{const j=new Date(p.createdAt),D=new Date(Date.now()-7*24*60*60*1e3);return j>D}).length,Ze=s>0?Math.round(d/s):0,es=i>0?Math.round(y/i):0,ss=s>0?Math.round(m/s/1024):0;return{totalUploads:s,totalQuizzes:i,totalPages:d,totalFileSize:m,totalQuestions:y,quizTypes:A,mcqQuestions:$,tfQuestions:Ye,fillQuestions:Ge,recentUploads:Je,recentQuizzes:Xe,avgPagesPerUpload:Ze,avgQuestionsPerQuiz:es,avgFileSize:ss}},[x,u]);n.useEffect(()=>{o&&console.log("Statistics updated:",{totalQuizzes:o.totalQuizzes,totalQuestions:o.totalQuestions,uploadsCount:(x==null?void 0:x.length)||0,quizzesCount:(u==null?void 0:u.length)||0})},[o,x==null?void 0:x.length,u==null?void 0:u.length]);const H=(u==null?void 0:u.filter(s=>{var m,y,A;const i=!h||((m=s.name)==null?void 0:m.toLowerCase().includes(h.toLowerCase()))||((y=s.folder)==null?void 0:y.toLowerCase().includes(h.toLowerCase()))||((A=s.tags)==null?void 0:A.some($=>$.toLowerCase().includes(h.toLowerCase()))),d=N==="all"||N==="uncategorized"&&!s.folder||s.folder===N;return i&&d}))||[];return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"ClariTA"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[a&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(Es,{className:"h-4 w-4"}),e.jsx("span",{"data-testid":"text-user-name",children:a.fullName||a.email||"User"})]}),e.jsxs(w,{variant:"outline",onClick:Be,"data-testid":"button-logout",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome back!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Upload a new PDF to generate quizzes or view your quiz history."})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(_,{children:[e.jsx(U,{children:e.jsxs(M,{className:"flex items-center",children:[e.jsx(G,{className:"h-5 w-5 mr-2"}),"Quick Actions"]})}),e.jsx(I,{className:"space-y-3",children:e.jsx(P,{href:"/upload",children:e.jsxs(w,{className:"w-full","data-testid":"button-upload-new",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Upload New PDF"]})})})]}),e.jsxs(_,{className:"mt-6",children:[e.jsxs(U,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5"}),"Your Statistics"]}),e.jsx(ws,{children:"Your learning progress and activity overview"})]}),e.jsx(I,{children:o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.totalUploads}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Documents"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:o.totalQuizzes}),e.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Quizzes"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Content Overview"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Pages"}),e.jsx("span",{className:"font-medium",children:o.totalPages})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Questions"}),e.jsx("span",{className:"font-medium",children:o.totalQuestions})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Avg Pages/Doc"}),e.jsx("span",{className:"font-medium",children:o.avgPagesPerUpload})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Avg Questions/Quiz"}),e.jsx("span",{className:"font-medium",children:o.avgQuestionsPerQuiz})]})]})]}),o.totalQuestions>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Question Types"]}),e.jsxs("div",{className:"space-y-2",children:[o.mcqQuestions>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multiple Choice"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${o.mcqQuestions/o.totalQuestions*100}%`}})}),e.jsx("span",{className:"text-xs font-medium w-8",children:o.mcqQuestions})]})]}),o.tfQuestions>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"True/False"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${o.tfQuestions/o.totalQuestions*100}%`}})}),e.jsx("span",{className:"text-xs font-medium w-8",children:o.tfQuestions})]})]}),o.fillQuestions>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fill in Blank"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${o.fillQuestions/o.totalQuestions*100}%`}})}),e.jsx("span",{className:"text-xs font-medium w-8",children:o.fillQuestions})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(Ls,{className:"h-4 w-4"}),"This Week"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-green-50 dark:bg-green-950 rounded",children:[e.jsx("div",{className:"font-semibold text-green-600 dark:text-green-400",children:o.recentUploads}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:"New Uploads"})]}),e.jsxs("div",{className:"text-center p-2 bg-indigo-50 dark:bg-indigo-950 rounded",children:[e.jsx("div",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:o.recentQuizzes}),e.jsx("div",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:"New Quizzes"})]})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Uploads"}),e.jsx("span",{className:"font-semibold","data-testid":"text-upload-count",children:(x==null?void 0:x.length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Quizzes"}),e.jsx("span",{className:"font-semibold","data-testid":"text-quiz-count",children:(u==null?void 0:u.length)||0})]})]})})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(_,{children:[e.jsxs(U,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(M,{children:"Quiz Management"}),e.jsx("br",{})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(E,{placeholder:"Search quizzes by name, folder, or tags...",value:h,onChange:s=>C(s.target.value),className:"pl-10"})]}),e.jsxs(Is,{value:N,onValueChange:T,children:[e.jsx(ce,{className:"w-full sm:w-48",children:e.jsx(Bs,{placeholder:"Filter by folder"})}),e.jsxs(ue,{children:[e.jsx(R,{value:"all",children:"All Folders"}),e.jsx(R,{value:"uncategorized",children:"Uncategorized"}),O==null?void 0:O.map(s=>e.jsx(R,{value:s,children:s},s))]})]})]})]}),e.jsx(I,{children:Me?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading quizzes..."}):H.length>0?e.jsx("div",{className:"space-y-4",children:H.map(s=>{const i=x==null?void 0:x.find(d=>d.id===s.uploadId);return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(K,{className:"h-8 w-8 text-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:s.name||`Quiz from ${(i==null?void 0:i.fileName)||"Unknown"}`}),s.folder&&e.jsxs(Y,{variant:"secondary",className:"text-xs",children:[e.jsx(qs,{className:"h-3 w-3 mr-1"}),s.folder]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["From: ",i==null?void 0:i.fileName]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[Object.values(s.meta.countsByType).reduce((d,m)=>d+m,0)," questions"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Created ",new Date(s.createdAt).toLocaleDateString()]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.tags.map(d=>e.jsxs(Y,{variant:"outline",className:"text-xs",children:[e.jsx(_s,{className:"h-3 w-3 mr-1"}),d]},d))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s.hasAttempts?e.jsx(P,{href:`/quiz-results/${s.id}`,children:e.jsx(w,{variant:"outline",size:"sm",children:"View Results"})}):e.jsx(P,{href:`/quiz/${s.id}`,children:e.jsx(w,{variant:"outline",size:"sm",children:"Take Quiz"})}),e.jsxs(bs,{open:Ue&&(f==null?void 0:f.id)===s.id,onOpenChange:F,children:[e.jsx(Ds,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>We(s),children:e.jsx(Us,{className:"h-4 w-4"})})}),e.jsxs(As,{children:[e.jsxs(Cs,{children:[e.jsx(zs,{children:"Edit Quiz"}),e.jsx(ks,{children:"Update the quiz name, folder, and tags."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"name",children:"Quiz Name"}),e.jsx(E,{id:"name",value:v.name,onChange:d=>k(m=>({...m,name:d.target.value})),placeholder:"Enter quiz name"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"folder",children:"Folder"}),e.jsx(E,{id:"folder",value:v.folder,onChange:d=>k(m=>({...m,folder:d.target.value})),placeholder:"Enter folder name"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(E,{id:"tags",value:v.tags,onChange:d=>k(m=>({...m,tags:d.target.value})),placeholder:"e.g., database, sql, advanced"})]})]}),e.jsxs(Qs,{children:[e.jsx(w,{variant:"outline",onClick:Ve,children:"Cancel"}),e.jsx(w,{onClick:Ke,disabled:L.isPending,children:L.isPending?"Saving...":"Save Changes"})]})]})]}),e.jsxs(la,{children:[e.jsx(na,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",children:e.jsx(Ms,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(Pe,{children:[e.jsxs(Re,{children:[e.jsx(Le,{children:"Delete Quiz"}),e.jsx($e,{children:"Are you sure you want to delete this quiz? This action cannot be undone."})]}),e.jsxs(Oe,{children:[e.jsx(_e,{children:"Cancel"}),e.jsx(qe,{onClick:()=>He(s.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]},s.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(K,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:h||N!=="all"?"No quizzes found":"No quizzes yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:h||N!=="all"?"Try adjusting your search or filter criteria.":"Upload a PDF and generate your first quiz to get started."}),!h&&N==="all"&&e.jsx(P,{href:"/upload",children:e.jsxs(w,{children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Upload Your First PDF"]})})]})})]})})]})]})]})}export{ja as default};
